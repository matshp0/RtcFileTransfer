name: CI/CD

on:
  push:
    branches: [ main, feature/* ]
  pull_request:
    branches: [ main ]

jobs:
  build-and-test:
      runs-on: ubuntu-latest
  
      steps:
        - name: ğŸ“¥ Checkout repository
          uses: actions/checkout@v3
  
        - name: ğŸŸ¢ Use Node.js 20
          uses: actions/setup-node@v4
          with:
            node-version: '20'
  
        - name: ğŸ“¦ Install dependencies
          run: npm ci
  
        - name: ğŸ§¹ Lint code
          run: npm run lint
  
        - name: ğŸ› ï¸ Build project
          run: npm run build
  
        - name: ğŸ§ª Run unit tests
          run: npm run test
          env:
            NODE_OPTIONS: '--experimental-vm-modules'
  
        - name: ğŸ§ª Run E2E tests (Playwright in Docker)
        run: npm run test:e2e
